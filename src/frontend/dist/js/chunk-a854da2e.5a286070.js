(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a854da2e"],{"169a9":function(t,e,i){"use strict";i("7db0"),i("caad"),i("45fc"),i("a9e3"),i("2532"),i("498a");var n=i("5530"),r=i("2909"),a=i("ade3"),o=(i("368e"),i("480e")),c=i("4ad4"),s=i("b848"),l=i("75eb"),d=i("e707"),u=i("e4d3"),f=i("21be"),h=i("f2e7"),v=i("a293"),m=i("58df"),g=i("d9bd"),p=i("80d2"),b=Object(m["a"])(c["a"],s["a"],l["a"],d["a"],u["a"],f["a"],h["a"]);e["a"]=b.extend({name:"v-dialog",directives:{ClickOutside:v["a"]},props:{dark:Boolean,disabled:Boolean,fullscreen:Boolean,light:Boolean,maxWidth:{type:[String,Number],default:"none"},noClickAnimation:Boolean,origin:{type:String,default:"center center"},persistent:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,transition:{type:[String,Boolean],default:"dialog-transition"},width:{type:[String,Number],default:"auto"}},data:function(){return{activatedBy:null,animate:!1,animateTimeout:-1,isActive:!!this.value,stackMinZIndex:200}},computed:{classes:function(){var t;return t={},Object(a["a"])(t,"v-dialog ".concat(this.contentClass).trim(),!0),Object(a["a"])(t,"v-dialog--active",this.isActive),Object(a["a"])(t,"v-dialog--persistent",this.persistent),Object(a["a"])(t,"v-dialog--fullscreen",this.fullscreen),Object(a["a"])(t,"v-dialog--scrollable",this.scrollable),Object(a["a"])(t,"v-dialog--animated",this.animate),t},contentClasses:function(){return{"v-dialog__content":!0,"v-dialog__content--active":this.isActive}},hasActivator:function(){return Boolean(!!this.$slots.activator||!!this.$scopedSlots.activator)}},watch:{isActive:function(t){t?(this.show(),this.hideScroll()):(this.removeOverlay(),this.unbind())},fullscreen:function(t){this.isActive&&(t?(this.hideScroll(),this.removeOverlay(!1)):(this.showScroll(),this.genOverlay()))}},created:function(){this.$attrs.hasOwnProperty("full-width")&&Object(g["e"])("full-width",this)},beforeMount:function(){var t=this;this.$nextTick((function(){t.isBooted=t.isActive,t.isActive&&t.show()}))},beforeDestroy:function(){"undefined"!==typeof window&&this.unbind()},methods:{animateClick:function(){var t=this;this.animate=!1,this.$nextTick((function(){t.animate=!0,window.clearTimeout(t.animateTimeout),t.animateTimeout=window.setTimeout((function(){return t.animate=!1}),150)}))},closeConditional:function(t){var e=t.target;return!(this._isDestroyed||!this.isActive||this.$refs.content.contains(e)||this.overlay&&e&&!this.overlay.$el.contains(e))&&this.activeZIndex>=this.getMaxZIndex()},hideScroll:function(){this.fullscreen?document.documentElement.classList.add("overflow-y-hidden"):d["a"].options.methods.hideScroll.call(this)},show:function(){var t=this;!this.fullscreen&&!this.hideOverlay&&this.genOverlay(),this.$nextTick((function(){t.$refs.content.focus(),t.bind()}))},bind:function(){window.addEventListener("focusin",this.onFocusin)},unbind:function(){window.removeEventListener("focusin",this.onFocusin)},onClickOutside:function(t){this.$emit("click:outside",t),this.persistent?this.noClickAnimation||this.animateClick():this.isActive=!1},onKeydown:function(t){if(t.keyCode===p["x"].esc&&!this.getOpenDependents().length)if(this.persistent)this.noClickAnimation||this.animateClick();else{this.isActive=!1;var e=this.getActivator();this.$nextTick((function(){return e&&e.focus()}))}this.$emit("keydown",t)},onFocusin:function(t){if(t&&this.retainFocus){var e=t.target;if(e&&![document,this.$refs.content].includes(e)&&!this.$refs.content.contains(e)&&this.activeZIndex>=this.getMaxZIndex()&&!this.getOpenDependentElements().some((function(t){return t.contains(e)}))){var i=this.$refs.content.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),n=Object(r["a"])(i).find((function(t){return!t.hasAttribute("disabled")}));n&&n.focus()}}},genContent:function(){var t=this;return this.showLazyContent((function(){return[t.$createElement(o["a"],{props:{root:!0,light:t.light,dark:t.dark}},[t.$createElement("div",{class:t.contentClasses,attrs:Object(n["a"])({role:"document",tabindex:t.isActive?0:void 0},t.getScopeIdAttrs()),on:{keydown:t.onKeydown},style:{zIndex:t.activeZIndex},ref:"content"},[t.genTransition()])])]}))},genTransition:function(){var t=this.genInnerContent();return this.transition?this.$createElement("transition",{props:{name:this.transition,origin:this.origin,appear:!0}},[t]):t},genInnerContent:function(){var t={class:this.classes,ref:"dialog",directives:[{name:"click-outside",value:{handler:this.onClickOutside,closeConditional:this.closeConditional,include:this.getOpenDependentElements}},{name:"show",value:this.isActive}],style:{transformOrigin:this.origin}};return this.fullscreen||(t.style=Object(n["a"])(Object(n["a"])({},t.style),{},{maxWidth:"none"===this.maxWidth?void 0:Object(p["g"])(this.maxWidth),width:"auto"===this.width?void 0:Object(p["g"])(this.width)})),this.$createElement("div",t,this.getContentSlot())}},render:function(t){return t("div",{staticClass:"v-dialog__container",class:{"v-dialog__container--attached":""===this.attach||!0===this.attach||"attach"===this.attach},attrs:{role:"dialog"}},[this.genActivator(),this.genContent()])}})},"368e":function(t,e,i){},"4bd4":function(t,e,i){"use strict";i("4de4"),i("7db0"),i("4160"),i("caad"),i("07ac"),i("2532"),i("159b");var n=i("5530"),r=i("58df"),a=i("7e2b"),o=i("3206");e["a"]=Object(r["a"])(a["a"],Object(o["b"])("form")).extend({name:"v-form",provide:function(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(t){var e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput:function(t){var e=this,i=function(t){return t.$watch("hasError",(function(i){e.$set(e.errorBag,t._uid,i)}),{immediate:!0})},n={_uid:t._uid,valid:function(){},shouldValidate:function(){}};return this.lazyValidation?n.shouldValidate=t.$watch("shouldValidate",(function(r){r&&(e.errorBag.hasOwnProperty(t._uid)||(n.valid=i(t)))})):n.valid=i(t),n},validate:function(){return 0===this.inputs.filter((function(t){return!t.validate(!0)})).length},reset:function(){this.inputs.forEach((function(t){return t.reset()})),this.resetErrorBag()},resetErrorBag:function(){var t=this;this.lazyValidation&&setTimeout((function(){t.errorBag={}}),0)},resetValidation:function(){this.inputs.forEach((function(t){return t.resetValidation()})),this.resetErrorBag()},register:function(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister:function(t){var e=this.inputs.find((function(e){return e._uid===t._uid}));if(e){var i=this.watchers.find((function(t){return t._uid===e._uid}));i&&(i.valid(),i.shouldValidate()),this.watchers=this.watchers.filter((function(t){return t._uid!==e._uid})),this.inputs=this.inputs.filter((function(t){return t._uid!==e._uid})),this.$delete(this.errorBag,e._uid)}}},render:function(t){var e=this;return t("form",{staticClass:"v-form",attrs:Object(n["a"])({novalidate:!0},this.attrs$),on:{submit:function(t){return e.$emit("submit",t)}}},this.$slots.default)}})},"564a":function(t,e,i){"use strict";var n=i("c15f"),r=i.n(n);r.a},c15f:function(t,e,i){},c88c:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.loading?i("LoaderComponent"):t.loading?t._e():i("v-card",[i("v-card-title",{class:t.categoryColor},[i("span",{class:t.window.isMobile?"truncate":""},[t._v(" "+t._s(t.form.categoryTitle)+" - "+t._s(t.categoryText)+" ")]),i("v-spacer"),i("v-btn",{attrs:{icon:"",to:"/History"}},[i("v-icon",[t._v(" mdi-close-circle ")])],1)],1),i("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-container",[i("v-select",{attrs:{label:"Категория",items:t.categoriesAll,rules:[t.validationRules.validMustBeFilled],"item-text":"title","item-value":"id","prepend-icon":"mdi-format-list-bulleted",required:""},model:{value:t.categoryTypeSelect,callback:function(e){t.categoryTypeSelect=e},expression:"categoryTypeSelect"}}),i("v-select",{attrs:{label:"Тип операции",items:t.categoryItems,rules:[t.validationRules.validMustBeFilled],"item-text":"text","item-value":"type","item-color":"color","prepend-icon":"mdi-format-list-bulleted",required:""},model:{value:t.categorySelect,callback:function(e){t.categorySelect=e},expression:"categorySelect"}}),i("v-dialog",{ref:"dialog",attrs:{"return-value":t.form.date,persistent:"",width:"290px"},on:{"update:returnValue":function(e){return t.$set(t.form,"date",e)},"update:return-value":function(e){return t.$set(t.form,"date",e)}},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[i("v-text-field",t._g({attrs:{label:"Дата","prepend-icon":"mdi-calendar",readonly:""},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}},n))]}}]),model:{value:t.dateModal,callback:function(e){t.dateModal=e},expression:"dateModal"}},[i("v-date-picker",{attrs:{scrollable:"",locale:t.locale,"first-day-of-week":"1"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}},[i("v-spacer"),i("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.dateModal=!1}}},[t._v(" Cancel ")]),i("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.dialog.save(t.form.date)}}},[t._v(" OK ")])],1)],1),i("v-text-field",{attrs:{label:"Счет",rules:[t.validationRules.validMustBeFilled,t.validationRules.validOnlyNumbers],required:"","prepend-icon":"mdi-credit-card-multiple",clearable:""},model:{value:t.form.count,callback:function(e){t.$set(t.form,"count",e)},expression:"form.count"}}),i("v-text-field",{attrs:{label:"Метка","prepend-icon":"mdi-lead-pencil",rules:[t.validationRules.validOnlyLetters],clearable:""},model:{value:t.form.marker,callback:function(e){t.$set(t.form,"marker",e)},expression:"form.marker"}}),i("v-text-field",{attrs:{label:"Описание","prepend-icon":"mdi-lead-pencil",clearable:""},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1),i("v-card-actions",{staticClass:"v-card-actions"},[t.window.isMobile?i("v-btn",{attrs:{icon:"",large:""},on:{click:t.onRemove}},[i("v-icon",[t._v("mdi-table-row-remove")])],1):t.window.isMobile?t._e():i("v-btn",{attrs:{text:""},on:{click:t.onRemove}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-table-row-remove")]),t._v(" удалить ")],1),t.window.isMobile?i("v-btn",{attrs:{icon:"",large:"",to:"/History"}},[i("v-icon",[t._v("mdi-chart-line")])],1):t.window.isMobile?t._e():i("v-btn",{attrs:{text:"",to:"/History"}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-chart-line")]),t._v(" История ")],1),t.window.isMobile?i("v-btn",{attrs:{icon:"",large:"",disabled:!t.valid},on:{click:t.onSave}},[i("v-icon",[t._v("mdi-content-save")])],1):t.window.isMobile?t._e():i("v-btn",{attrs:{text:"",disabled:!t.valid},on:{click:t.onSave}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-content-save")]),t._v(" сохранить ")],1)],1),i("v-dialog",{attrs:{"max-width":"290"},model:{value:t.dialogToRemove,callback:function(e){t.dialogToRemove=e},expression:"dialogToRemove"}},[i("v-card",[i("v-card-title",{staticClass:"headline"},[t._v(" Удалить запись? ")]),i("v-card-text",[t._v(" Внимание. Удаление записи необратимо. Подтвердите удаление записи. ")]),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){t.dialogToRemove=!1}}},[t._v(" Отмена ")]),i("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){t.dialogToRemove=!1,t.removeRecord()}}},[t._v(" Удалить ")])],1)],1)],1)],1)},r=[],a=(i("a4d3"),i("e01a"),i("7db0"),i("5530")),o=(i("96cf"),i("1da1")),c=i("2b0e"),s=i("2f62"),l=i("87c7"),d=i("f3cd"),u=c["a"].extend({name:"DetailPage",metaInfo:{title:"Редактирование записи"},components:{LoaderComponent:l["a"]},data:function(){return{validationRules:d["a"],loading:!0,valid:!1,id:"",locale:"ru-RU",categorySelect:{type:"outcome"},categoryItems:[{type:"outcome",text:"Расход",color:"deep-orange lighten-4"},{type:"income",text:"Доход",color:"teal lighten-4"}],categoryTypeSelect:{}||"",categoryColor:"",categoryText:"",dateModal:!1,dialogToRemove:!1,form:{categoryId:"",categoryType:"",categoryTitle:"",count:0,marker:"",description:"",date:""}}},created:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.checkAvailabilityData();case 2:return t.id=t.$route.params.id,e.next=5,t.getRecordByIdAction(t.id);case 5:t.setCategoryData();case 6:case"end":return e.stop()}}),e)})))()},mounted:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.checkAvailabilityData();case 2:t.loading=!1;case 3:case"end":return e.stop()}}),e)})))()},computed:Object(a["a"])(Object(a["a"])({},Object(s["c"])(["recordByIdGetter","categoriesGetter","windowGetter"])),{},{record:function(){return this.recordByIdGetter},categoriesAll:function(){return this.categoriesGetter},window:function(){return this.windowGetter}}),watch:{categorySelect:function(t){var e=this.categoryItems.find((function(e){return e.type===t}));e&&(this.form.categoryType=e.type,this.categoryColor=e.color,this.categoryText=e.text)},categoryTypeSelect:function(t){var e=this.categoriesAll,i=e.find((function(e){return e.id===t}));i&&(this.form.categoryTitle=i.title,this.form.categoryId=i.id)}},methods:Object(a["a"])(Object(a["a"])({},Object(s["b"])(["getRecordByIdAction","removeRecordAction","updateRecordAction","infoUpdateAction"])),{},{onRemove:function(){this.dialogToRemove=!0},removeRecord:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.removeRecordAction(t.record);case 2:t.$router.push("/History");case 3:case"end":return e.stop()}}),e)})))()},onSave:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=Object(a["a"])(Object(a["a"])({},t.record),t.form),e.next=3,t.updateRecordAction(i);case 3:t.$router.push("/History");case 4:case"end":return e.stop()}}),e)})))()},setCategoryData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.categoryItems.find((function(e){return t.record.categoryType===e.type})),t.categorySelect=i,e.next=4,new Date(t.record.date).toISOString().substr(0,10);case 4:t.form.date=e.sent,t.form.count=t.record.count,t.form.marker=t.record.marker,t.form.description=t.record.description,t.form.categoryTitle=t.record.categoryTitle,t.form.categoryId=t.record.categoryId,t.form.categoryType=i.type,t.categoryColor=i.color,t.categoryText=i.text,t.categoryTypeSelect=t.categoriesAll.find((function(e){return e.id===t.record.categoryId}))||"";case 14:case"end":return e.stop()}}),e)})))()},checkAvailabilityData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$store.getters.categoriesGetter){e.next=3;break}return e.next=3,t.$store.dispatch("fetchCategoriesAction");case 3:if(t.$store.getters.recordsGetter){e.next=6;break}return e.next=6,t.$store.dispatch("fetchRecordsAction");case 6:if(t.$store.getters.uidGetter){e.next=9;break}return e.next=9,t.$store.dispatch("fetchInfoAction");case 9:case"end":return e.stop()}}),e)})))()}})}),f=u,h=(i("564a"),i("2877")),v=i("6544"),m=i.n(v),g=i("8336"),p=i("b0af"),b=i("99d9"),y=i("a523"),w=i("2e4b"),x=i("169a9"),k=i("4bd4"),O=i("132d"),_=i("b974"),$=i("2fa4"),C=i("8654"),A=Object(h["a"])(f,n,r,!1,null,"21c15d27",null);e["default"]=A.exports;m()(A,{VBtn:g["a"],VCard:p["a"],VCardActions:b["a"],VCardText:b["b"],VCardTitle:b["c"],VContainer:y["a"],VDatePicker:w["a"],VDialog:x["a"],VForm:k["a"],VIcon:O["a"],VSelect:_["a"],VSpacer:$["a"],VTextField:C["a"]})},f3cd:function(t,e,i){"use strict";i("a9e3");var n={validMustBeFilled:function(t){return 0===Number(t)||!!t||"Это поле нужно заполнить"},validOnlyLetters:function(t){return/^[a-z\u017F\u0430-\u044F\u0451\u1C80-\u1C86\u212A]+$/i.test(t)||!t||"В поле должны быть только буквы и одно слово"},validOnlyNumbers:function(t){return/^\d+(?:[\.,]\d+)?$/.test(t)||!t||"Это поле должно содержать только положительные числа"}};e["a"]=n}}]);
//# sourceMappingURL=chunk-a854da2e.5a286070.js.map